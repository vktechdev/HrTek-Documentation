## **Для представителей компании, руководителей и сотрудников**
### **Страница сотрудника**
Страница сотрудника может быть доступна для руководителей и коллег. Доступ к странице настраивается в разделе **Настройки компании → Использование ролевой модели** (объект доступа «Сотрудник — Персональные данные»). Подробнее в [статье](/ru/admin_actions/settings/settings_comp/role_model).

Открыть страницу сотрудника можно в разделе **Организационная структура**, нажав на карточку сотрудника в выбранном подразделении. Подробности см. в [статье](/ru/admin_actions/management_structure/structure#poisk_sotrudnikov_v_podrazdeleniyah_kompanii).
### **Организационная структура** 
Для оргструктуры компании добавлен поиск сотрудников по ФИО, табельному номеру, должности и подразделению. Подробнее в [статье](/ru/admin_actions/management_structure/structure).

### **Настройка доступа к данным организационной структуры** 

Для доступа к организационной структуре компании включите настройку **Использование ролевой модели** (**Сервисы компании → Настройки → Настройки компании**). На странице **Настройка доступов к данным** в строке **Подразделения структуры** по умолчанию добавлена группа «Менеджер графика отпусков». 

Если включена настройка ролевой модели и для группы «Менеджер графика отпусков» удалён доступ к оргструктуре, то в списке сотрудников на исключение из планирования графиков отпусков будут только те, к которым есть доступ у сотрудника или руководителя.

Для сотрудников и руководителей можно выбирать следующие доступы:

- Вся оргструктура — доступны все подразделения компании;
- Только своё подразделение — доступно подразделение, в котором у пользователя есть неуволенный сотрудник;
- Своё и дочерние подразделения — доступны подразделение, в котором у пользователя есть неуволенный сотрудник, и все подразделения вниз по иерархии от него.
- Нет доступа — раздел **Организационная структура** недоступен для пользователей.

![](./assets/org.png)

### **Отсутствия сотрудника**
В карточку сотрудника в разделе **Организационная структура** и на страницу сотрудника добавлены данные о текущих и предстоящих отсутствиях сотрудника: командировках, отпусках, больничных и др. Доступ к просмотру периодов отсутствий настраивается в разделе **Настройки компании → Использование ролевой модели**. 

![](./assets/OrganizationChart-11.png)

![](./assets/personaldatamanager.png)

### **Виджет с персональными ссылками**

На главную страницу можно добавить виджет для персональных ссылок пользователя. Отображение виджета на странице настраивается в административной панели, в разделе **Main page → Company widgest list**. А после этого каждый пользователь добавляет на виджет свои ссылки.

![](./assets/Main_Page_Company.png)

![](./assets/Page_Personal_links_widget_1.png)
### **«Шапка» главной страницы**
Уменьшена высота закрепляемой «шапки» при прокрутке страницы.

![](./assets/Fast_Actions_Upd.png)

## **Для руководителей**
### **Назначение временных заместителей**
В разделе **Настройки → Заместители сотрудников** или в **Профиле пользователя** можно назначить заместителя на заданный период или период отсутствия, например, если руководитель планирует уйти в отпуск. Назначенный сотрудник будет автоматически удален из списка заместителей по окончании указанного периода для замещения. Подробности см. в [статье](/ru/admin_actions/management_structure/substitutes).
## **Для представителей компании и руководителей**
### **Выборка значений из списка заявок и сотрудников**
Появилась возможность сохранять собственные наборы выбранных значений в фильтрах списков заявок/сотрудников. Например, в фильтрах раздела **Заявки** выберите значение хотя бы для одного параметра и сохраните выборку.

![](./assets/List_tasks-Filterssetups.png)

После сохранения выборка появится в «шапке» списка заявок. При нажатии на название выборки открытый список будет отфильтрован по значениям, выбранным ранее.

![](./assets/List_tasksFilterssetups.png)

## **Для представителей компании**
### **Работа со справочниками «ключ-значение»**
Ранее сервис VK HR Tek получал для элементов справочника только текстовые значения из публичного API (Public API).

Теперь сервис будет получать справочники, где для каждого элемента указывается ключ (код/идентификатор) и название элемента в сторонней системе. Сервис VK HR Tek (КЭДО) будет получать справочники по Public API.

Например: у клиента есть SAP, и SAP является мастер-системой для справочников. В КЭДО должны приходить только актуальные значения справочников. При этом в момент передачи данных по заявке, КЭДО должно возвращать не наименование элемента, а его ключ. Так для бизнес-процессов «Авансовый отчёт» и «Отчёт о расходах» КЭДО получит ключ = *RUB* и значение = *Российский рубль* из справочника «Валюты».

### **Отсутствия из системы SAP**
Научились передавать данные об отсутствиях сотрудников из системы SAP в сервис VK HR Tek.

## **Работа с заявками**
### **Просмотр этапов заявки**
Обновили «шапку» заявок и добавили в неё компактный просмотр этапов заявки.

![](./assets/EventCard-1-3.png)

### **Создание заявки заместителем**
Заместитель может создавать заявки на сотрудника, который является подчиненным руководителя, которого он замещает.

![](./assets/Substitutes-Forperiod.png)

### **Отмена заявки на определенном этапе**
 
Представитель компании может отменить заявку только на определенных этапах, где отображается кнопка **Отменить заявку**. На этапах, где отмена заявки запрещена, это ограничение задаётся настройкой *"company\_cancelable": false* в JSON.

![](./assets/json_cancel.png)

### **Валидаторы**
1\. Для случаев, когда сотрудник хочет оформить заявку на отсутствие, но не знает, сможет ли создать определённый вид отсутствия на даты уже существующих согласованных отсутствий, добавлен валидатор, определяющий действие для пользователя при пересечении групп видов отсутствий.

Каждая группа видов отсутствий (отпуск, командировка и др.) имеет определённое действие, которое будет выполнено в ситуации пересечения с другой группой:

- запрет выбора определённого периода;
- выбор периода с выводом предупреждения, что на эти даты уже есть согласованное отсутствие.

2\. Добавлен валидатор, который не дает оформлять заявку в период, когда сотруднику запрещено брать командировку. Определенные даты в календаре будут заблокированы для выбора сотрудником, если они заполнены для него как запрещенные.

![](./assets/validator.png)

3\. На страницу заявки добавлено описание валидаторов.

![](./assets/UpdatedFormCallout.png)

### **Ручная отправка интеграционного сообщения**
Если сотрудник оформляет заявку на командировку, но процесс зависает на этапе передачи данных в тревел-систему, то сотрудник может вручную повторно отправить запрос на создание командировки в тревел-системе.

Запрос можно повторить, когда завершилось определенное количество автоматических попыток отправки запроса на создание командировки в тревел-систему.

Данная настройка и текст сообщения об ошибке указываются на уровне JSON бизнес-процесса.

![](./assets/Businesstrip-Corteos.png)

## **Для администратора**
### **Работа с обособленными подразделениями**
Научились обозначать обособленные подразделения (филиалы и т.п.). При генерации документов сотрудников из таких подразделений следующие плейсхолдеры будут заполняться данными обособленного подразделения вместо данных компании:

- Company.Name: название обособленного подразделения;
- Company.LegalInfo.CeoFio: ФИО руководителя обособленного подразделения;
- Company.LegalInfo.CeoPosition: должность руководителя обособленного подразделения.

Чтобы указывать обособленные подразделения в компании, Администратор КЭДО должен включить настройку **Работа с обособленными подразделениями в оргструктуре**.

![](./assets/CompanySettings-admin.png)

При добавлении/редактировании подразделения можно поставить отметку, что подразделение является обособленным. 

![](./assets/OrganizationChart-HR-Add.png)

В оргструктуре обособленные подразделения будут обозначены следующим образом:

![](./assets/Organization_Flag-12.png)

### **Группы видов отсутствий**

В административной панели, в разделе **Companies → Absence type groups** можно добавлять группы отсутствий. По умолчанию в компании всегда заводятся 5 обязательных групп (те, что используются в оргструктуре для указания отсутствия сотрудника):

- Отпуск;
- Декретный отпуск;
- Учебный отпуск;
- Больничный;
- Командировка.

При добавлении новые виды отсутствий будут автоматически распределяться по стандартным группам на основе ключевых слов, которые содержатся в названии вида. Также виды отсутствий можно распределять вручную по любым группам.

### **Время жизни токена**
Добавлена возможность устанавливать срок жизни токена для доступа к публичному API (Public API) сервиса VK HR Tek. За 30 дней до истечения действия токена пользователю будет отправлено уведомление о необходимости сменить токен.

Для установки нового срока жизни токена перейдите в административную панель, в раздел **Integrations** → **List Integrations** → **Edit integration** → блок **Tokens**.
### **Формат названия архивного файла**
Добавили настройку правил формирования названий архивов по заявкам сотрудников и без участия сотрудников. Форматы названий архивных файлов задаются в настройках инсталляции.


## **Исправления**
Скорректировали скачивание pdf-отчёта об изменениях в заявке.